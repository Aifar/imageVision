# Electron 图片查看器

一个现代美观的图片搜索、缩略图查看和压缩工具，使用 Electron 构建。

## 功能特性

- 🖼️ **动态搜索图片** - 快速搜索指定文件夹中的图片
- 🔍 **智能缩略图** - 自动生成高质量缩略图并存储到 thumb 目录
- 📊 **详细信息显示** - 显示图片名称、缩略图尺寸、原图尺寸和文件大小
- 🎨 **现代美观界面** - 采用现代设计语言，支持响应式布局
- ⚡ **高性能** - 使用 Sharp 和 Imagemin 库进行高效图片处理
- 🔄 **实时搜索** - 支持按文件名实时过滤图片
- 🖱️ **图片预览** - 点击缩略图查看原图
- 🗜️ **智能图片压缩** - 支持批量压缩和单张图片压缩
- 💡 **压缩建议** - 根据文件大小和类型提供智能压缩建议
- 📁 **自动目录管理** - 自动创建 thumb 和 compressed 目录

## 支持的图片格式

- JPEG (.jpg, .jpeg)
- PNG (.png)
- GIF (.gif)
- BMP (.bmp)
- WebP (.webp)
- SVG (.svg)
- TIFF (.tiff, .tif)

## 压缩功能

### 压缩算法

- **Sharp** - 高性能图片处理库，支持多种格式
- **Imagemin** - 流行的图片压缩工具集
- **智能回退** - 优先使用 Sharp，失败时自动回退到 Imagemin

### 压缩策略

- **JPEG**: 使用 MozJPEG 算法，支持渐进式压缩
- **PNG**: 使用 PNGQuant 算法，支持质量调节
- **GIF**: 使用 Gifsicle 算法优化
- **WebP**: 原生 WebP 压缩支持

### 压缩建议

- 根据文件大小自动判断是否需要压缩
- 大文件（>1MB）：建议压缩，可节省约 30% 空间
- 中等文件（>500KB）：建议压缩，可节省约 20% 空间
- 小文件：提示压缩效果有限

## 安装和运行

### 1. 安装依赖

```bash
npm install
```

### 2. 开发模式运行

```bash
npm run dev
```

### 3. 生产模式运行

```bash
npm start
```

### 4. 构建应用

```bash
npm run build
```

## 使用方法

### 基本功能

1. **选择文件夹** - 点击"选择文件夹"按钮，选择包含图片的文件夹
2. **浏览图片** - 应用会自动扫描并显示文件夹中的所有图片
3. **搜索图片** - 在搜索框中输入关键词来过滤图片
4. **查看详情** - 点击任意图片查看原图和详细信息

### 压缩功能

1. **批量压缩** - 选择文件夹后，使用工具栏的"压缩图片"按钮
2. **单张压缩** - 在图片预览模态框中点击"压缩此图片"按钮
3. **质量调节** - 使用滑块调节压缩质量（50%-95%）
4. **查看结果** - 压缩完成后查看节省的空间和压缩统计

### 目录结构

```
选择的文件夹/
├── thumb/           # 缩略图目录
│   ├── image1_thumb.jpg
│   └── image2_thumb.png
├── compressed/      # 压缩图片目录
│   ├── image1_compressed.jpg
│   └── image2_compressed.png
└── 原始图片文件...
```

## 键盘快捷键

- `Ctrl/Cmd + F` - 聚焦搜索框
- `Ctrl/Cmd + R` - 刷新当前文件夹
- `Escape` - 关闭图片预览或压缩对话框

## 技术栈

- **Electron** - 跨平台桌面应用框架
- **Sharp** - 高性能图片处理库
- **Imagemin** - 图片压缩工具集
- **MozJPEG** - JPEG 压缩算法
- **PNGQuant** - PNG 压缩算法
- **Gifsicle** - GIF 优化工具
- **HTML/CSS/JavaScript** - 前端界面

## 项目结构

```
├── main.js          # Electron 主进程
├── preload.js       # 预加载脚本
├── index.html       # 主界面
├── styles.css       # 样式文件
├── renderer.js      # 渲染进程脚本
├── package.json     # 项目配置
└── README.md        # 说明文档
```

## 开发说明

### 主要组件

- **主进程 (main.js)** - 处理窗口创建、文件系统操作、图片压缩和 IPC 通信
- **渲染进程 (renderer.js)** - 处理用户界面交互、图片显示和压缩控制
- **预加载脚本 (preload.js)** - 提供安全的主进程与渲染进程通信接口

### 核心功能实现

- **图片扫描** - 递归搜索指定文件夹中的图片文件，自动跳过 thumb 目录
- **缩略图生成** - 使用 Sharp 库生成高质量缩略图并存储到 thumb 目录
- **图片压缩** - 智能选择压缩算法，支持批量处理和单张处理
- **响应式网格** - 使用 CSS Grid 实现自适应的图片网格布局
- **模态框预览** - 点击缩略图在模态框中显示原图和压缩建议

### 压缩算法选择

1. **Sharp** - 优先使用，性能最佳，支持多种格式
2. **Imagemin** - 备用方案，提供更多压缩选项
3. **文件复制** - 最后回退方案，确保功能可用

## 许可证

MIT License

## 作者

Your Name

---

享受使用这个现代美观的图片查看和压缩工具！ 🎉
