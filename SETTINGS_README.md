# 设置功能说明

## 新增功能

### 设置菜单

- 在应用菜单的"功能"选项中新增了"设置"菜单项
- 点击后会打开设置对话框，可以配置图片目录和压缩质量

### 设置选项

#### 1. 图片目录设置

- **默认图片目录**: 设置应用默认加载图片的目录路径
- 点击"选择目录"按钮可以选择新的图片目录
- 设置会保存到用户主目录的 `.imagevision-settings.json` 文件中

#### 2. 压缩质量设置

- **JPEG 压缩质量**: 设置 JPEG 图片的压缩质量（0-100）
- **PNG 压缩质量**: 设置 PNG 图片的压缩质量（0-100）
- **WebP 压缩质量**: 设置 WebP 图片的压缩质量（0-100）

#### 3. 预设选项

每个压缩质量设置都提供了预设选项：

- 低质量：快速压缩，文件更小
- 中等：平衡压缩效果和文件大小
- 推荐：默认的最佳设置
- 高质量：保持更好的图片质量

## 使用方法

1. 启动应用后，点击菜单栏的"功能" → "设置"
2. 在设置对话框中配置所需的选项
3. 点击"保存设置"按钮保存配置
4. 设置会立即生效，下次启动应用时会自动加载

## 技术实现

### 文件结构

- `main.js`: 添加了设置窗口创建和 IPC 处理器
- `settings.html`: 设置页面的 HTML 结构
- `settings.js`: 设置页面的 JavaScript 逻辑
- `preload.js`: 添加了设置相关的 API 接口

### 数据存储

- 设置数据保存在用户主目录的 `.imagevision-settings.json` 文件中
- 包含图片目录路径和各种压缩质量设置

### 压缩配置

- 压缩函数现在会动态读取设置中的质量值
- 支持 JPEG、PNG、WebP 等格式的独立质量设置

## 注意事项

1. 设置文件是 JSON 格式，可以手动编辑
2. 如果设置文件损坏或不存在，会使用默认设置
3. 图片目录设置会影响应用启动时加载的图片
4. 压缩质量设置会影响新压缩的图片质量
